<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Textual Echo Cancellation</title>
    <link rel="stylesheet" type="text/css" href="../../resources/stylesheet.css">
    <link rel="shortcut icon" href="../../resources/logo.png">
    <style>
        code {
            display: block;
            white-space: pre-wrap
        }
    </style>
</head>

<body>
    <div>
        <h1>Textual Echo Cancellation</h1>
        <p><b>Paper:</b> <a href="https://arxiv.org/abs/2008.06006">arXiv</a></p>
        <p><b>Authors:</b> Shaojin Ding, Ye Jia, Ke Hu, Quan Wang</p>

        <p><b>Abstract:</b>
            In this paper, we propose Textual Echo Cancellation (TEC) - a framework for cancelling the text-to-speech
            (TTS)
            playback echo from overlapped speech recordings. Such a system can largely improve speech recognition
            performance
            and user experience for intelligent devices such as smart speakers, as the user can talk to the device while
            the
            device is still playing the TTS signal responding to the previous query. We implement this system by using a
            novel
            sequence-to-sequence model with multi-source attention that takes both the microphone mixture signal and the
            source text of the TTS playback as inputs, and predicts the enhanced audio. Experiments show that the
            textual
            information of the TTS playback is critical to the enhancement performance. Besides, the text sequence is
            much
            smaller in size compared with the raw acoustic signal of the TTS playback, and can be immediately
            transmitted to
            the device and the ASR server even before the playback is synthesized. Therefore, our proposed approach
            effectively reduces Internet communication and latency compared with alternative approaches such as acoustic
            echo
            cancellation (AEC).
        </p>

        <p><b>System architecture:</b></p>
        <p><img src="resources/TEC_diagram.png" width="800"></p>

        <h2>Random audio samples from LibriTTS testing set</h2>

        <p>Data configurations under the two condition:</p>

        <p><img src="resources/data_config.png" width="800"></p>

    <p>Meaning of the columns in the table below:
      <ol>
        <li>Microphone signal: The microphone mixture audio input to TEC model. It's generated by
          summing the user's speech with a reverberated TTS playback (i.e., interfering speech).</li>
        <li>TTS playback: The TTS playback. <i>Only used for AEC baseline system</i>.</li>
        <li>TTS playback source text: The source text of TTS playback. <i>Only used for TEC system</i>.</li>
        <li>TEC: The output from the proposed TEC model.</li>
        <li>AEC-NLMS: Signal processing AEC method based on normalized least mean square (NLMS).</li>
        <li>Vanilla-Seq2seq: The output from the baseline NoSideInput model.</li>
        <li>AEC-Seq2seq: The output from the baseline AEC model.</li>
        <li>User's speech: The clean user's speech audio, which is the ground truth.</li>
      </ol>
    </p>

        <h3>Single interfering voice condition</h3>

    <table>
      <thead>
        <tr>
          <th>Microphone signal</th>
          <th>TTS playback <i>(only for AEC)</i></th>
          <th>TTS playback source text <i>(only for TEC)</i></th>
          <th>TEC (proposed)</th>
          <th>AEC-NLMS</th>
          <th>Vanilla-Seq2seq</th>
          <th>AEC-Seq2seq</th>
          <th>User's speech (ground truth)</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><audio controls class="adio-player" preload="metadata" style="width: 220px;">
              <source src="audios/single/mixed/121_127105_000042_000005_interfering_LJ049-0031.wav" type="audio/wav"></audio></td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/single/interfering/121_127105_000042_000005_interfering_LJ049-0031.wav" type="audio/wav"></audio></td>
          <td style="width: 220px;">The Presidential vehicle in use in Dallas, described in chapter 2,</td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/single/tec/121_127105_000042_000005_interfering_LJ049-0031.wav" type="audio/wav"></audio></td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/single/aec_nlms/121_127105_000042_000005_interfering_LJ049-0031.wav" type="audio/wav"></audio></td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/single/vanilla_seq2seq/121_127105_000042_000005_interfering_LJ049-0031.wav" type="audio/wav"></audio></td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/single/aec_seq2seq/121_127105_000042_000005_interfering_LJ049-0031.wav" type="audio/wav"></audio></td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/single/clean/121_127105_000042_000005_interfering_LJ049-0031.wav" type="audio/wav"></audio></td>
        </tr>
        <tr>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/single/mixed/1089_134686_000002_000002_interfering_LJ034-0037.wav" type="audio/wav"></audio></td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/single/interfering/1089_134686_000002_000002_interfering_LJ034-0037.wav" type="audio/wav"></audio></td>
          <td style="width: 220px;">Someone sitting on the box facing the window would have his palm in this position if he placed his hand alongside his right hip.</td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/single/tec/1089_134686_000002_000002_interfering_LJ034-0037.wav" type="audio/wav"></audio></td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/single/aec_nlms/1089_134686_000002_000002_interfering_LJ034-0037.wav" type="audio/wav"></audio></td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/single/vanilla_seq2seq/1089_134686_000002_000002_interfering_LJ034-0037.wav" type="audio/wav"></audio></td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/single/aec_seq2seq/1089_134686_000002_000002_interfering_LJ034-0037.wav" type="audio/wav"></audio></td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/single/clean/1089_134686_000002_000002_interfering_LJ034-0037.wav" type="audio/wav"></audio></td>
        </tr>
        <tr>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/single/mixed/1089_134686_000002_000003_interfering_LJ002-0076.wav" type="audio/wav"></audio></td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/single/interfering/1089_134686_000002_000003_interfering_LJ002-0076.wav" type="audio/wav"></audio></td>
          <td style="width: 220px;">The state side contained twelve good-sized rooms,</td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/single/tec/1089_134686_000002_000003_interfering_LJ002-0076.wav" type="audio/wav"></audio></td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/single/aec_nlms/1089_134686_000002_000003_interfering_LJ002-0076.wav" type="audio/wav"></audio></td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/single/vanilla_seq2seq/1089_134686_000002_000003_interfering_LJ002-0076.wav" type="audio/wav"></audio></td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/single/aec_seq2seq/1089_134686_000002_000003_interfering_LJ002-0076.wav" type="audio/wav"></audio></td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/single/clean/1089_134686_000002_000003_interfering_LJ002-0076.wav" type="audio/wav"></audio></td>
        </tr>
        <tr>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/single/mixed/1284_1180_000029_000001_interfering_LJ039-0014.wav" type="audio/wav"></audio></td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/single/interfering/1284_1180_000029_000001_interfering_LJ039-0014.wav" type="audio/wav"></audio></td>
          <td style="width: 220px;">Marina Oswald appeared before the Commission again on June 11, 1964,</td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/single/tec/1284_1180_000029_000001_interfering_LJ039-0014.wav" type="audio/wav"></audio></td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/single/aec_nlms/1284_1180_000029_000001_interfering_LJ039-0014.wav" type="audio/wav"></audio></td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/single/vanilla_seq2seq/1284_1180_000029_000001_interfering_LJ039-0014.wav" type="audio/wav"></audio></td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/single/aec_seq2seq/1284_1180_000029_000001_interfering_LJ039-0014.wav" type="audio/wav"></audio></td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/single/clean/1284_1180_000029_000001_interfering_LJ039-0014.wav" type="audio/wav"></audio></td>
        </tr>
        <tr>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/single/mixed/1320_122612_000051_000000_interfering_LJ018-0305.wav" type="audio/wav"></audio></td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/single/interfering/1320_122612_000051_000000_interfering_LJ018-0305.wav" type="audio/wav"></audio></td>
          <td style="width: 220px;">The bills were sent as a matter of form to the drawer to have the date added, and the forgery was at once detected.</td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/single/tec/1320_122612_000051_000000_interfering_LJ018-0305.wav" type="audio/wav"></audio></td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/single/aec_nlms/1320_122612_000051_000000_interfering_LJ018-0305.wav" type="audio/wav"></audio></td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/single/vanilla_seq2seq/1320_122612_000051_000000_interfering_LJ018-0305.wav" type="audio/wav"></audio></td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/single/aec_seq2seq/1320_122612_000051_000000_interfering_LJ018-0305.wav" type="audio/wav"></audio></td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/single/clean/1320_122612_000051_000000_interfering_LJ018-0305.wav" type="audio/wav"></audio></td>
        </tr>
      </tbody>
    </table>

        <h3>Multiple interfering voices condition</h3>


    <table>
      <thead>
        <tr>
          <th>Microphone signal</th>
          <th>TTS playback <i>(only for AEC)</i></th>
          <th>TTS playback source text <i>(only for TEC)</i></th>
          <th>TEC (proposed)</th>
          <th>AEC-NLMS</th>
          <th>Vanilla-Seq2seq</th>
          <th>AEC-Seq2seq</th>
          <th>User's speech (ground truth)</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/multiple/mixed/1089_134686_000002_000000_interfering_p241_075.wav" type="audio/wav"></audio></td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/multiple/interfering/1089_134686_000002_000000_interfering_p241_075.wav" type="audio/wav"></audio></td>
          <td style="width: 220px;">It is a job creation scheme.</td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/multiple/tec/1089_134686_000002_000000_interfering_p241_075.wav" type="audio/wav"></audio></td>
              <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
                <source src="audios/multiple/aec_nlms/1089_134686_000002_000000_interfering_p241_075.wav" type="audio/wav"></audio></td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/multiple/vanilla_seq2seq/1089_134686_000002_000000_interfering_p241_075.wav" type="audio/wav"></audio></td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/multiple/aec_seq2seq/1089_134686_000002_000000_interfering_p241_075.wav" type="audio/wav"></audio></td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/multiple/clean/1089_134686_000002_000000_interfering_p241_075.wav" type="audio/wav"></audio></td>
        </tr>
        <tr>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/multiple/mixed/1089_134686_000015_000002_interfering_p239_098.wav" type="audio/wav"></audio></td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/multiple/interfering/1089_134686_000015_000002_interfering_p239_098.wav" type="audio/wav"></audio></td>
          <td style="width: 220px;">The Government yesterday announced its proposed new pension account.</td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/multiple/tec/1089_134686_000015_000002_interfering_p239_098.wav" type="audio/wav"></audio></td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/multiple/aec_nlms/1089_134686_000015_000002_interfering_p239_098.wav" type="audio/wav"></audio></td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/multiple/vanilla_seq2seq/1089_134686_000015_000002_interfering_p239_098.wav" type="audio/wav"></audio></td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/multiple/aec_seq2seq/1089_134686_000015_000002_interfering_p239_098.wav" type="audio/wav"></audio></td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/multiple/clean/1089_134686_000015_000002_interfering_p239_098.wav" type="audio/wav"></audio></td>
        </tr>
        <tr>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/multiple/mixed/1284_1180_000053_000001_interfering_p230_144.wav" type="audio/wav"></audio></td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/multiple/interfering/1284_1180_000053_000001_interfering_p230_144.wav" type="audio/wav"></audio></td>
          <td style="width: 220px;">The first thing is to assess the damage that has been done.</td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/multiple/tec/1284_1180_000053_000001_interfering_p230_144.wav" type="audio/wav"></audio></td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/multiple/aec_nlms/1284_1180_000053_000001_interfering_p230_144.wav" type="audio/wav"></audio></td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/multiple/vanilla_seq2seq/1284_1180_000053_000001_interfering_p230_144.wav" type="audio/wav"></audio></td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/multiple/aec_seq2seq/1284_1180_000053_000001_interfering_p230_144.wav" type="audio/wav"></audio></td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/multiple/clean/1284_1180_000053_000001_interfering_p230_144.wav" type="audio/wav"></audio></td>
        </tr>
        <tr>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/multiple/mixed/1320_122612_000053_000000_interfering_p363_107.wav" type="audio/wav"></audio></td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/multiple/interfering/1320_122612_000053_000000_interfering_p363_107.wav" type="audio/wav"></audio></td>
          <td style="width: 220px;">I am the head.</td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/multiple/tec/1320_122612_000053_000000_interfering_p363_107.wav" type="audio/wav"></audio></td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/multiple/aec_nlms/1320_122612_000053_000000_interfering_p363_107.wav" type="audio/wav"></audio></td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/multiple/vanilla_seq2seq/1320_122612_000053_000000_interfering_p363_107.wav" type="audio/wav"></audio></td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/multiple/aec_seq2seq/1320_122612_000053_000000_interfering_p363_107.wav" type="audio/wav"></audio></td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/multiple/clean/1320_122612_000053_000000_interfering_p363_107.wav" type="audio/wav"></audio></td>
        </tr>
        <tr>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/multiple/mixed/1995_1837_000019_000000_interfering_p326_154.wav" type="audio/wav"></audio></td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/multiple/interfering/1995_1837_000019_000000_interfering_p326_154.wav" type="audio/wav"></audio></td>
          <td style="width: 220px;">A new school will be built.</td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/multiple/tec/1995_1837_000019_000000_interfering_p326_154.wav" type="audio/wav"></audio></td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/multiple/aec_nlms/1995_1837_000019_000000_interfering_p326_154.wav" type="audio/wav"></audio></td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/multiple/vanilla_seq2seq/1995_1837_000019_000000_interfering_p326_154.wav" type="audio/wav"></audio></td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/multiple/aec_seq2seq/1995_1837_000019_000000_interfering_p326_154.wav" type="audio/wav"></audio></td>
          <td><audio controls class="audio-player" preload="metadata" style="width: 220px;">
              <source src="audios/multiple/clean/1995_1837_000019_000000_interfering_p326_154.wav" type="audio/wav"></audio></td>
        </tr>
      </tbody>
    </table>
  </div>

</body>

</html>